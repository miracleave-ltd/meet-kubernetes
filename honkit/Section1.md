# Section1

### 目次
No.1 Dockerとは<br>
No.2 Kubernetesとは<br>
No.3 Kubernetesが生まれた歴史<br>
No.4 Kubernetesのそれぞれのサービスの概要<br>
No.5 Komposeとは<br>

<br><br>

## Dockerとは
### 概要
Dockerは、アプリケーションを開発、出荷、実行するためのオープンプラットフォームです。Dockerを使用すると、アプリケーションをインフラストラクチャから分離できるため、ソフトウェアを迅速に提供できます。Dockerを使用すると、アプリケーションを管理するのと同じ方法でインフラストラクチャを管理できます。コードを迅速に出荷、テスト、デプロイするためのDockerの方法論を利用することで、コードの記述から本番環境での実行までの遅延を大幅に減らすことができます。
<br>
画像（VirtualBoxとdockerを比較している写真）
<br>

### Dockerコンテナのメリット
・資源の効率化

Dockerはホストカーネルを共有し、従来のハイパーバイザ型のHyper-Vやホスト型のVirtualBox等のようにOSを丸ごとインストールする必要がなく資源を効率的に扱っている。

・アプリ実行環境構築の容易さ

Dockerはアプリケーションとライブラリを同一のコンテナ内に固めることができ、一度固めたコンテナは軽量で持ち運びが容易。DockerがインストールされているOSであれば移動が容易に行える。

・設定間違いなどの不可逆的操作の廃棄の容易さ

複雑なシステムであれば一度設定を間違えると、影響範囲の調査などに時間がかる可能性がある。しかしDockerであれば設定を間違えたと思えばすぐさま削除することができる。変更も「Docker file」を修正することで再構築でき、イメージを段階的に残しておくことで設定間違いの前の状態にすぐにもどることができる。

<br><br>

## Kubernetes(K8s)とは(https://kubernetes.io/docs/concepts/overview/what-is-kubernetes/)

Kubernetes（クバネティス/クバネテス/クーべネティス、K8s）は、コンテナ化したアプリケーションのデプロイ、スケーリング、および管理を行うための、オープンソースのコンテナオーケストレーションシステムである。

#### Kubernetesでできること

1. サービス検出と負荷分散 <br>
Kubernetesは、DNS名または独自のIPアドレスを使用してコンテナを公開できます。コンテナへのトラフィックが多い場合、Kubernetesはネットワークトラフィックを負荷分散して分散できるため、デプロイが安定します。
2. ストレージオーケストレーション <br>
Kubernetesを使用すると、ローカルストレージ、パブリッククラウドプロバイダー(AWS,Azuru,GCP)など、選択したストレージシステムを自動的にマウントできます。
3. 自動ロールアウトとロールバック <br>
Kubernetesを使用して、デプロイされたコンテナの目的の状態を記述でき、制御されたレートで実際の状態を目的の状態に変更できます。たとえば、Kubernetesを自動化して、デプロイ用の新しいコンテナを作成し、既存のコンテナを削除して、すべてのリソースを新しいコンテナに採用できます。
4. 自動ビンパッキング <br>
Kubernetesに、コンテナ化されたタスクの実行に使用できるノードのクラスターを提供します。各コンテナに必要なCPUとメモリ（RAM）の量をKubernetesに伝えます。Kubernetesは、コンテナをノードに適合させて、リソースを最大限に活用できます。
5. 自己修復 <br>
Kubernetesは、失敗したコンテナを再起動し、コンテナを置き換え、ユーザー定義のヘルスチェックに応答しないコンテナを強制終了し、サービスを提供する準備ができるまでクライアントにアドバタイズしません。
6. シークレットと構成の管理 <br>
Kubernetesを使用すると、パスワード、OAuthトークン、SSHキーなどの機密情報を保存および管理できます。コンテナイメージを再構築したり、スタック構成でシークレットを公開したりすることなく、シークレットとアプリケーション構成をデプロイおよび更新できます。

<br><br>

## Kubernetesが生まれた背景

#### VMが登場する以前
アプリケーションを展開するために、オペレーティングシステムのパッケージマネージャを使用してアプリケーションをホストにインストールしていました。しかし、この方法だと、アプリケーションの実行可能ファイル、ライブラリ、ライフサイクル、OSなどが互いに依存してしまうという難点がありました。

#### VMが登場
そこで登場したのが「VM」でした。VMが登場したことによってハードウェアレベルでの仮想化がすすみ、一台のサーバ上に複数のオペレーティングシステム (OS) を走らせることができるようになりました。しかし、VMも移植性がなく、重いという欠点がありました。

#### Dockerの登場
VMの重い、移植性がない、資源(resource)の浪費が激しいなどの欠点を克服したのがDockerでした。コンテナはVMに比べて構築が容易（Dockerfileを用いて）で、コンテナ同士は互いに独立的であり、OSのカーネルを共有することで資源(resource)の浪費を軽減し、クラウド間などで移植するといったことが可能になりました。
<br>

#### Kubernetesの登場
しかし今度はDockerの管理の問題が浮上しました。
数台レベルでコンテナを立ち上げるのはそこまで大変ではなかったものの、規模が大きくなってくるとコンテナの構成、コンテナ管理、死活管理などの運用がとても大変になってしまいました。そんな悩みを解決するべく現れたのがkubernetesです。
<br>
kubernetesはアプリケーションの死活管理、オートスケール、ロードバランシング、リソース監視など、さまざまなニーズを満たす機能を備えています。また、Kubernetesは、主にマイクロサービスなどの複数のコンテナで構成されるアプリケーションを対象としていて非コンテナ化されたアプリケーションのKubernetesへの移行を容易にし、多数のクラウドプロバイダーと物理ホスト上で動作するように設計されています
<br><br>

## Kubernetesのそれぞれのサービスの概要

#### クラスタ(Cluster)
クラスタとは、アプリケーションを実行するためにKubernetesが使用する物理マシンや仮想マシン、その他のインフラリソースのセットのことを指します。
<br>
#### ノード(Node)
ノードは、Kubernetesを実行している物理マシンまたは仮想マシンで、ポッドを動かします。(スケジューリング)
<br>
#### ポッド(Pod)
ポッドは複数のコンテナの集合です。Kubernetesの最小単位です。
<br>
#### ラベル(Label)
ラベルは、ポッドなどのリソースにアタッチされるキー/値のペアです。ラベルを使用して、リソースのサブセットを整理し、選択することができます。
<br>
#### レプリカセット(Replica Set)
元々はレプリケーションコントローラという名前でしたが、レプリカセットという名前になりました。
レプリカセットは、指定した数のポッドレプリカがいつでも実行されていることを確認します。両方とも、複製されたシステムの簡単なスケーリングを可能にし、ポッドが再起動したとき、または失敗したときにポッドの再作成を処理します。
<br>
#### サービス(Service)
サービスは、単一の安定したIPアドレスや対応するDNS名など、一連のポッドとそれらにアクセスする手段を定義します。ロードバランサのようなものです。この「サービス」という命名に、マイクロサービスへの意識が感じられます。(個人的な感想です)
<br>
#### シークレット(Secret)
Secretは、認証トークンなどの機密データを保管し、要求に応じてコンテナに提供することができます。イケてますね。
<br>
#### ネームスペース(Namespace)
名前空間は、リソース名の接頭辞に似ています。
(マイクロサービスなどにおける)チーム間での名前の衝突を防ぐなど、さまざまなプロジェクト、チーム、または顧客がクラスタを共有する際に役立ちます。
<br>
#### kubectl
API経由でKubenetesを操作するためのクライアントツール
<br>
#### アノテーション(Annotations)
識別できない補助データ（特に、ツールやシステム拡張によって操作されるデータ）を格納するために、（ラベルと比較して）大きくて人間が読めるものではないデータを保持できるキーと値のペア。アノテーション値による効率的なフィルタリングはサポートされていません。
<br>
#### Deployments
DeploymentsはPodの管理をします。
Deploymentオブジェクトの目的の状態を記述するだけで、目的の状態に変更してくれます。神ってる。

<br><br>

## Komposeとは
Docker Composeの設定ファイルをKubernetes向けに変換するツールです。

また、変換によって生成されたリソース群を、docker-composeライクなインタフェースで制御することもできます。

